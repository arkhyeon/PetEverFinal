<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="reviewboard">
<!-- 게시판목록 -->
<select id="selectReviewBoardList" resultMap="reviewBoardMap">
	select 
		*
	from 
		review_board 
    order by 
      	rew_bo_id desc
</select>
	
<resultMap id="reviewBoardMap" type="reviewBoard">
</resultMap>
 
	<!-- 게시판 글 작성  -->
  	<insert id="insertReviewBoard">
		insert into 
			review_board  
		values(
			review_board_seq.nextval,
			#{userId},
			#{rewBoTitle},
			#{RewBoContent},
			sysdate
		)
		
		<selectKey keyProperty="rewBoId" resultType="_int" order="AFTER">
			select
				review_board_seq.currval
			from
				dual
		</selectKey>		
		
	
	</insert> 


	<insert id="insertAttachment">
			insert into
				review_attach 
			values(
				review_attach_seq.nextval,
				#{rewBoId},
				#{rewAtOriginalName},
				#{rewAtRenamedName},
				default
			)

		</insert>
		

<!-- 	<select id="read" parameterType="int">
	select rew_bo_id,
			user_id,
			rew_bo_title,
			rew_bo_content,
			rew_bo_reg_date
		from review_board
		 where rew_bo_id = #{rewBoId}
	</select> -->
	
	<!-- 조회 -->
	<select id="selectOneBoard" resultMap="reviewBoardMap">
		select
			*
		from
			review_board
		where
			rew_bo_id = #{no}
	</select>
	
	<!-- 수정 -->
	<update id="updateBoard">
	update 
		review_board 
	set 
		rew_bo_title = #{rewBoTitle},
		rew_bo_content = #{RewBoContent}
	where 
		rew_bo_id = #{rewBoId}
	</update>
	
	<!-- 삭제 -->
	<delete id="deleteBoard">
	delete
		from 
	review_board
	 	where
	 rew_bo_id = #{rewBoId}
	</delete>
	
	
	
</mapper>