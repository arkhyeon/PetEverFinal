<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="reviewboard">
<!-- 게시판목록 -->
<select id="selectReviewBoardList" resultMap="reviewBoardMap">
	select 
		*
	from 
		review_board 
    order by 
      	rew_bo_id desc
</select>
	
<resultMap id="reviewBoardMap" type="reviewBoard">
</resultMap>
 
	<!-- 게시판 글 작성  -->
  	<insert id="insertReviewBoard">
		insert into 
			review_board  
		values(
			review_board_seq.nextval,
			#{userId},
			#{rewBoTitle},
			#{RewBoContent},
			sysdate
		)
		
		<selectKey keyProperty="rewBoId" resultType="_int" order="AFTER">
			select
				review_board_seq.currval
			from
				dual
		</selectKey>		
		
	
	</insert> 


	<insert id="insertAttachment">
			insert into
				review_attach 
			values(
				review_attach_seq.nextval,
				#{rewBoId},
				#{rewAtOriginalName},
				#{rewAtRenamedName},
				default
			)
			
	
		</insert>
	
</mapper>